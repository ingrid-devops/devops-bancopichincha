# Script completo para subir a GitHub
Write-Host "ğŸš€ SUBIENDO PROYECTO A GITHUB..." -ForegroundColor Cyan
Write-Host "==================================" -ForegroundColor Cyan

# 1. Navegar al proyecto
Set-Location "C:\Users\II ASUS II\Desktop\devops-bancopichincha"

# 2. Verificar estado
Write-Host "`nğŸ“Š ESTADO ACTUAL:" -ForegroundColor Yellow
git status

# 3. Agregar todo
Write-Host "`nğŸ“¦ AGREGANDO ARCHIVOS..." -ForegroundColor Yellow
git add .
Write-Host "âœ… Archivos agregados" -ForegroundColor Green

# 4. Hacer commit
Write-Host "`nğŸ’¾ CREANDO COMMIT..." -ForegroundColor Yellow
$commitMessage = @"
feat: Complete DevOps Technical Assessment for Banco Pichincha

Implementation Details:
â€¢ Flask REST API with /DevOps endpoint (POST method)
â€¢ API Key authentication: 2f5ae96c-b558-4c7b-a590-a501ae1c3f6c
â€¢ Other HTTP methods return 'ERROR' string
â€¢ Docker containerization with optimized multi-stage build
â€¢ CI/CD pipeline using GitHub Actions (test, build, deploy)
â€¢ Infrastructure as Code with Terraform (AWS EKS)
â€¢ Kubernetes orchestration with LoadBalancer service
â€¢ High Availability: 2+ replicas with auto-scaling
â€¢ Comprehensive test suite with >80% coverage (TDD)
â€¢ Code quality tools: flake8, black, pre-commit
â€¢ Environment configuration with secrets management

All requirements from the PDF have been implemented.
"@

git commit -m $commitMessage
Write-Host "âœ… Commit creado" -ForegroundColor Green

# 5. Subir a GitHub
Write-Host "`nğŸ“¤ SUBIENDO A GITHUB..." -ForegroundColor Yellow
try {
    git push origin main
    Write-Host "`nâœ… Â¡PROYECTO SUBIDO EXITOSAMENTE!" -ForegroundColor Green
    Write-Host "   URL: https://github.com/tuusuario/devops-bancopichincha" -ForegroundColor Cyan
    
    # Mostrar resumen
    Write-Host "`nğŸ“ ARCHIVOS PRINCIPALES SUBIDOS:" -ForegroundColor Magenta
    Get-ChildItem -Recurse -File | Where-Object {
        $_.Name -match "\.(py|yaml|yml|tf|md|Dockerfile|txt)$"
    } | Select-Object -First 15 Name, Directory
    
} catch {
    Write-Host "`nâŒ Error al subir: $_" -ForegroundColor Red
    Write-Host "`nğŸ”§ SOLUCIÃ“N:" -ForegroundColor Yellow
    Write-Host "1. Verifica tu conexiÃ³n a internet" -ForegroundColor White
    Write-Host "2. Crea un Personal Access Token en GitHub:" -ForegroundColor White
    Write-Host "   https://github.com/settings/tokens" -ForegroundColor White
    Write-Host "3. Usa el token como contraseÃ±a" -ForegroundColor White
    Write-Host "`nğŸ”„ Intenta manualmente con:" -ForegroundColor Cyan
    Write-Host "   git push https://TU_TOKEN@github.com/tuusuario/devops-bancopichincha.git main" -ForegroundColor White
}

# 6. Verificar
Write-Host "`nğŸ” VERIFICACIÃ“N FINAL:" -ForegroundColor Cyan
git log --oneline -3
Write-Host "`nğŸ¯ Â¡EJERCICIO COMPLETADO!" -ForegroundColor Green